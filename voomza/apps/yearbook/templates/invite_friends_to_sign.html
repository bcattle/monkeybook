{% extends 'two_page.html' %}
{% load staticfiles %}
{% load url from future %}

{# invite_friends_to_sign.html                                  #}
{# Bryan Cattle     11/14/2012                                  #}
{#                                                              #}
{# This page allows users to send "requests" to their friends,  #}
{# to sign their yearbook.                                      #}
{#                                                              #}
{# UI elements:                                                 #}
{#  - List of friends with checkboxes                           #}
{#  - "Select all" button/checkbox                              #}
{#  - Input box, type to filter names                           #}
{#  - Submit button                                             #}
{#  - Skip button                                               #}
{#                                                              #}
{# Data in:                                                     #}
{#  - "Top friends", pulled via AJAX request                    #}
{#  - all other friends, pulled via Ajax request                #}
{#                                                              #}
{# Data out:                                                    #}
{#  - calls facebook js request dialog with list of friends     #}
{#                                                              #}
{# Interactions:                                                #}
{#  - Typing in the search box filters by name                  #}
{#  - Potentially, once a user is checked they move to a        #}
{#    separate pane where all checked users stack up            #}
{#  - If request dialog submitted successfully, redirect        #}
{#    to "vote badges" page                                     #}
{#                                                              #}

{% block message %}
    <h1>Invite friends to sign your yearbook</h1>
{% endblock %}

{# -- PAGES -- #}

{% block page_1 %}
    <div class="page_content">

    </div>
{% endblock %}

{% block page_2 %}
    {#  ACTIONS  #}
    <div class="page_content">
        <div style="float:left;">
            <button id="selectNone">Unselect</button>
        </div>
        <div style="float:left;">
            <button id="selectAll">Re-select</button>
        </div>
        <div style="float:left;">
            <button id="submit">Next >></button>
        </div>
        <div class="list_search" style="clear:both;">
            {# Type to search friends input #}
            <form action="" method="post" id="filter_form">
                <input id="filter_input" style="width:100%" placeholder="Type to search for a friend">
            </form>
        </div>
        {#        List of friends #}
        <div class="list" style="clear:both; height:500px; overflow-y:scroll;">
            <form action="" method="POST">
                {% csrf_token %}
                <ul class="friends_list"></ul>
            </form>
        </div>
    </div>
{% endblock %}

{% block top_of_body %}
    {% include 'facebook_js.html' %}
{% endblock %}

{% block script %}
    <script type="text/javascript" src="{% static 'js/jquery-1.7.2.min.js' %}"></script>
    <script type="text/javascript" src="{% static 'js/jquery.cookie.js' %}"></script>
    <script type="text/javascript" src="{% static 'js/mustache.js' %}"></script>
    <script type="text/javascript" src="{% static 'js/typeahead.js' %}"></script>
    <script type="text/html" id="friend_template_checked">
        <li class="friend">
            <input name="friend_[[ facebook_id ]]" value="[[ facebook_id ]]" type="checkbox" checked="checked">
            <img src="[[ pic_square ]]">[[ name ]]
        </li>
    </script>
    <script type="text/html" id="friend_template_unchecked">
        <li class="friend">
            <input name="friend_[[ facebook_id ]]" value="[[ facebook_id ]]" type="checkbox">
            <img src="[[ pic_square ]]">[[ name ]]
        </li>
    </script>
    <script type="text/javascript">
        var friendsUrl  = "{% url 'api_dispatch_list' api_name='v1' resource_name='friend' %}";
        var nextUrl = "{% url next_view %}";
        // Need if we're doing POST
        var csrftoken = $.cookie('csrftoken');
    </script>
    <script type="text/javascript" src="{% static 'js/invite_friends.js' %}"></script>
{% endblock %}
